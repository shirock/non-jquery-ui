<!DOCTYPE html>
<html lang="zh">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="../ui/limited-checkbox.js" crossorigin="anonymous"></script>
<title>複選但有限項目的表單元件</title>

<div class="container">
<h2>複選但有限項目的表單元件</h2>

<form id="form" action="dump.php" method="post">
</form>

<div class="row my-2">

<div class="col">
<fieldset id="A組[]" maxlength="3">
    <legend>A組：最多三項</legend>

    <input type="checkbox" id="A組-項目1" name="A組[]" value="A001" form="form">
    <label for="A組-項目1">A項目1</label><br>

    <input type="checkbox" id="A組-項目2" name="A組[]" value="A002" form="form">
    <label for="A組-項目2">A項目2</label><br>

    <input type="checkbox" id="A組-項目3" name="A組[]" value="A003" form="form">
    <label for="A組-項目3">A項目3</label><br>

    <input type="checkbox" id="A組-項目4" name="A組[]" value="A004" form="form">
    <label for="A組-項目4">A項目4</label><br>

    <input type="checkbox" id="A組-項目5" name="A組[]" value="A005" form="form">
    <label for="A組-項目5">A項目5</label><br>
</fieldset>
</div>

<div class="col">
<fieldset id="B組[]" minlength="2">
    <legend>B組：最少兩項</legend>

    <input type="checkbox" name="B組[]" value="B001" form="form">
    B項目1<br>

    <input type="checkbox" name="B組[]" value="B002" form="form">
    B項目2<br>

    <input type="checkbox" name="B組[]" value="B003" form="form">
    B項目3<br>

    <input type="checkbox" name="B組[]" value="B004" form="form">
    B項目4<br>
</fieldset>
</div>

<div class="col">
<fieldset id="C組[]" maxlength="2" minlength="1">
    <legend>C組：最少一項且最多兩項</legend>

    <input type="checkbox" id="C組-項目1" name="C組[]" value="C001" form="form">
    <label for="C組-項目1">C項目1</label><br>

    <input type="checkbox" id="C組-項目2" name="C組[]" value="C002" form="form">
    <label for="C組-項目2">C項目2</label><br>

    <input type="checkbox" id="C組-項目3" name="C組[]" value="C003" form="form">
    <label for="C組-項目3">C項目3</label><br><br>
</fieldset>
</div>

</div><!--row-->
<button type="submit" form="form" class="btn btn-primary">
    送出
</button> 
</div><!--container-->

<script>
window.addEventListener('load', () => {
    LimitedCheckbox.initial(
        valid_set   => valid_set.querySelector('legend').classList.remove('bg-warning'),
        invalid_set => invalid_set.querySelector('legend').classList.add('bg-warning')
    );
    // LimitedCheckbox.validCallback =   valid_set   => valid_set.querySelector('legend').classList.remove('bg-warning');
    // LimitedCheckbox.invalidCallback = invalid_set => invalid_set.querySelector('legend').classList.add('bg-warning');
    // 不合限制時，將背景色變為 bg-warning。合於限制時，移除背景色

    // 不指定 invalidCallback 時，也可以透過 invalid 事件處理不合限制的狀況
    document.addEventListener('invalid', ev => {
        console.log('invalid event', ev.target, ev.message);
    });

});
</script>
</html>
